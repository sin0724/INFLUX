# π€ λ³΄μ• κ°μ„ μ‚¬ν•­ μ μ© λ‹¨κ³„λ³„ κ°€μ΄λ“

## β… μ΄λ―Έ μ™„λ£λ μ‘μ—…
- μ½”λ“ λ³€κ²½μ‚¬ν•­ μ»¤λ°‹ λ° ν‘Έμ‹ μ™„λ£
- μ•”νΈν™” ν‚¤ μƒμ„± μ™„λ£

---

## π“‹ λ‹¤μ λ‹¨κ³„ (μμ„λ€λ΅ μ§„ν–‰)

### 1λ‹¨κ³„: Railway ν™κ²½ λ³€μ μ„¤μ •

1. Railway λ€μ‹λ³΄λ“ μ ‘μ†
2. ν”„λ΅μ νΈ μ„ νƒ
3. **Variables** νƒ­ ν΄λ¦­
4. μƒ ν™κ²½ λ³€μ μ¶”κ°€:
   - **Key**: `ENCRYPTION_KEY`
   - **Value**: `b15e984ccf2aabdaaf17143e23ed6f4c12d85cd0cf218fe21011abd8f9a04ccc`
5. μ €μ¥ ν›„ μ„λΉ„μ¤ μ¬λ°°ν¬ (μλ™μΌλ΅ μ¬λ°°ν¬λ  μ μμ)

**β οΈ μ¤‘μ”**: μ΄ ν‚¤λ¥Ό μ•μ „ν•κ² λ³΄κ΄€ν•μ„Έμ”! μƒμ–΄λ²„λ¦¬λ©΄ λ³µνΈν™” λ¶κ°€λ¥ν•©λ‹λ‹¤.

---

### 2λ‹¨κ³„: Supabase RLS μ •μ±… λΉ„ν™μ„±ν™”

1. Supabase λ€μ‹λ³΄λ“ μ ‘μ†
2. **SQL Editor** ν΄λ¦­
3. μ•„λ SQL μ‹¤ν–‰:

```sql
-- RLS μ •μ±… λΉ„ν™μ„±ν™” (API λ λ²¨ κ¶ν• μ²΄ν¬ μ‚¬μ©)
ALTER TABLE users DISABLE ROW LEVEL SECURITY;
ALTER TABLE orders DISABLE ROW LEVEL SECURITY;
ALTER TABLE admin_activity_logs DISABLE ROW LEVEL SECURITY;
ALTER TABLE point_charges DISABLE ROW LEVEL SECURITY;
ALTER TABLE checklist_items DISABLE ROW LEVEL SECURITY;
```

4. **RUN** λ²„νΌ ν΄λ¦­ν•μ—¬ μ‹¤ν–‰

---

### 3λ‹¨κ³„: κΈ°μ΅΄ λ„¤μ΄λ²„ λΉ„λ°€λ²νΈ μ•”νΈν™” (μ„ νƒμ‚¬ν•­)

**μ¤‘μ”**: μ΄ λ‹¨κ³„λ” κΈ°μ΅΄μ— λ„¤μ΄λ²„ λΉ„λ°€λ²νΈκ°€ ν‰λ¬ΈμΌλ΅ μ €μ¥λμ–΄ μλ” κ²½μ°μ—λ§ ν•„μ”ν•©λ‹λ‹¤.

1. λ΅μ»¬ ν™κ²½μ—μ„ `.env.local` νμΌ ν™•μΈ/μƒμ„±:
   ```env
   NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
   SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
   ENCRYPTION_KEY=b15e984ccf2aabdaaf17143e23ed6f4c12d85cd0cf218fe21011abd8f9a04ccc
   ```

2. λ§μ΄κ·Έλ μ΄μ… μ¤ν¬λ¦½νΈ μ‹¤ν–‰:
   ```bash
   node scripts/migrate-naver-passwords.js
   ```

**μ°Έκ³ **: μƒλ΅μ΄ λ„¤μ΄λ²„ λΉ„λ°€λ²νΈλ” μ΄λ―Έ μλ™μΌλ΅ μ•”νΈν™”λμ–΄ μ €μ¥λ©λ‹λ‹¤. μ΄ λ‹¨κ³„λ” κΈ°μ΅΄ λ°μ΄ν„°λ§ μ•”νΈν™”ν•©λ‹λ‹¤.

---

## β… ν™•μΈ μ‚¬ν•­

λ¨λ“  λ‹¨κ³„ μ™„λ£ ν›„ ν™•μΈ:

### 1. HTTPS λ¦¬λ‹¤μ΄λ ‰νΈ ν™•μΈ
- [ ] HTTPλ΅ μ ‘κ·Ό μ‹ HTTPSλ΅ μλ™ λ¦¬λ‹¤μ΄λ ‰νΈλλ”μ§€ ν™•μΈ

### 2. μ•”νΈν™” μ‘λ™ ν™•μΈ
- [ ] κ΄‘κ³ μ£Ό κ΄€λ¦¬ νμ΄μ§€μ—μ„ λ„¤μ΄λ²„ λΉ„λ°€λ²νΈ μ…λ ¥ β†’ μ €μ¥ β†’ μ΅°ν
- [ ] μ›λ³Έ λΉ„λ°€λ²νΈκ°€ μ •μƒμ μΌλ΅ ν‘μ‹λλ”μ§€ ν™•μΈ

### 3. Rate Limiting ν™•μΈ
- [ ] λ΅κ·ΈμΈ νμ΄μ§€μ— μ•λ‚΄ λ©”μ‹μ§€ ν‘μ‹λλ”μ§€ ν™•μΈ
- [ ] λ΅κ·ΈμΈ μ‹¤ν¨ μ‹ κ²½κ³  λ©”μ‹μ§€ ν‘μ‹λλ”μ§€ ν™•μΈ

### 4. λ΅κΉ… ν™•μΈ
- [ ] λ„¤μ΄λ²„ μ •λ³΄ μ΅°ν μ‹ ν™λ™ λ΅κ·Έμ— κΈ°λ΅λλ”μ§€ ν™•μΈ

---

## π― μ°μ„ μμ„

1. **1λ‹¨κ³„ (ν™κ²½ λ³€μ)** - ν•„μ β οΈ
   - μ΄κ±Έ λ¨Όμ € ν•΄μ•Ό μ•”νΈν™”κ°€ μ‘λ™ν•©λ‹λ‹¤
   - Railway μ¬λ°°ν¬ ν•„μ”

2. **2λ‹¨κ³„ (RLS λΉ„ν™μ„±ν™”)** - ν•„μ β οΈ
   - λ³΄μ• κ°•ν™”λ¥Ό μ„ν•΄ κ¶μ¥
   - SQL μ‹¤ν–‰λ§ ν•λ©΄ λ¨

3. **3λ‹¨κ³„ (κΈ°μ΅΄ λ°μ΄ν„° μ•”νΈν™”)** - μ„ νƒμ‚¬ν•­
   - κΈ°μ΅΄ ν‰λ¬Έ λΉ„λ°€λ²νΈκ°€ μλ” κ²½μ°λ§
   - μƒλ΅μ΄ λ°μ΄ν„°λ” μ΄λ―Έ μλ™ μ•”νΈν™”λ¨

---

## π’΅ ν

- **1λ‹¨κ³„μ™€ 2λ‹¨κ³„λ” λ°λ“μ‹ μ§„ν–‰ν•μ„Έμ”**
- **3λ‹¨κ³„λ” λ‚μ¤‘μ— ν•΄λ„ λ©λ‹λ‹¤** (μƒ λ°μ΄ν„°λ” μλ™ μ•”νΈν™”λ¨)
- Railway μ¬λ°°ν¬λ” μλ™μΌλ΅ λ  μ μμ§€λ§, μλ™μΌλ΅ μ¬λ°°ν¬ν•΄λ„ λ©λ‹λ‹¤

---

## π“ λ¬Έμ  λ°μƒ μ‹

- Railway λ΅κ·Έ ν™•μΈ
- Supabase SQL Editorμ—μ„ μ—λ¬ λ©”μ‹μ§€ ν™•μΈ
- `SECURITY_IMPROVEMENTS.md` νμΌ μ°Έκ³ 
